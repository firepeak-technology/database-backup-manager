# Development Dockerfile with hot-reload
FROM node:23-alpine

# Install database clients for development
RUN apk add --no-cache \
    postgresql-client \
    mysql-client \
    tzdata

# Set timezone
ENV TZ=Europe/Brussels

# Create app directory
WORKDIR /app

# Install backend dependencies
COPY package*.json ./
RUN npm install

# Install frontend dependencies
WORKDIR /app/frontend
COPY frontend/package*.json ./
RUN npm install

# Go back to root
WORKDIR /app

# Copy application files
COPY . .

# Create directories
RUN mkdir -p configs backups logs

# Expose ports
EXPOSE 3001 5173

# Start both backend and frontend in dev mode
CMD ["sh", "-c", "npm run dev & cd frontend && npm run dev"]
